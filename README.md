# web_template ğŸ”¥ğŸ”¥ğŸ”¥
webé¡¹ç›®åŸºç¡€æ¨¡æ¿ , æ–¹ä¾¿ç®€å•å¿«é€Ÿçš„å¼€å‘webé¡¹ç›®ã€‚

é¡¹ç›®æ–‡ä»¶ç›®å½•ä»‹ç»ï¼š
```
- config                        # webpacké…ç½®ç®¡ç†ç›®å½•                   (å¿…é€‰ï¼Œå›ºå®šç›®å½•ï¼Œå¯æŒ‰éœ€å¢åŠ webpacké…ç½®)
- public                        # é¡¹ç›®å…¬å…±èµ„æºç›®å½•                       (å¿…é€‰ï¼Œå›ºå®šç›®å½•,æŒ‰éœ€æ·»åŠ é¢å¤–èµ„æº)
-- index.html                   # é¡¹ç›®htmlæ–‡ä»¶                          (å¿…é€‰ï¼Œå›ºå®šæ–‡ä»¶)
-- public_app_config.js         # é¡¹ç›®å…¬å…±é…ç½®æ–‡ä»¶                       (å¿…é€‰ï¼Œå›ºå®šæ–‡ä»¶)
- src                           # é¡¹ç›®æºç ç›®å½•                           (å›ºå®šç›®å½•)
-- __internal                   # é¡¹ç›®æ¡†æ¶æºç ç›®å½•                       (å¿…é€‰ï¼Œå›ºå®šç›®å½•)
-- comps                        # é¡¹ç›®å…¬å…±ç»„ä»¶ç›®å½•                       (å¯é€‰ï¼Œæ¨èç›®å½•)
-- config                       # é¡¹ç›®ï¼ˆapp_storeå’Œapp_configï¼‰è‡ªå®šä¹‰é…ç½®ç›®å½•    (å¿…é€‰ï¼Œå›ºå®šç›®å½•)
-- examples                     # å…¬å…±ç»„ä»¶æ¼”ç¤ºå’ŒåŠŸèƒ½æ¼”ç¤ºæ ·ä¾‹ç›®å½•          (ä¸éœ€è¦)
-- pages                        # é¡¹ç›®åˆ†é¡µç®¡ç†ç›®å½•                       (å¯é€‰ï¼Œæ¨èç›®å½•)
-- services                     # å’Œåç«¯é€šä¿¡é…ç½®ç®¡ç†ç›®å½•                  (å¯é€‰ï¼Œæ¨èç›®å½•)
-- index.tsx                    # é¡¹ç›®å¯åŠ¨æ–‡ä»¶                           (å¿…é€‰ï¼Œå›ºå®šæ–‡ä»¶)
-- private_app_config.json      # é¡¹ç›®ç§æœ‰é…ç½®æ–‡ä»¶                       (å¿…é€‰ï¼Œå›ºå®šæ–‡ä»¶)
```

é¡¹ç›®ä¾èµ–:ğŸ‘©â€ğŸ’»ğŸ‘©â€ğŸ’»ğŸ‘©â€ğŸ’»
```
    - "webpack": "^4.41.2"
    - "typescript": "^3.7.2",
    - "react": "^16.12.0"
    - "react-router-dom": "^5.2.0",
```

é¡¹ç›®æä¾›:ğŸ’ğŸ’ğŸ’
```
    1. å¤šå…¥å£è®¾ç½®é¡¹ç›®ä¸åŒç¯å¢ƒçš„é…ç½®
    2. å…¨å±€å…±äº«çš„æ•°æ®ä¸­å¿ƒ
    3. å¯é€‰çš„APIè¯·æ±‚é…ç½®
    4. å†…ç½®å…¬å…±ç»„ä»¶åº“ï¼šç§æœ‰è·¯ç”±ã€æ‡’åŠ è½½ç»„ä»¶ç­‰
```

é¡¹ç›®-webpackç‰¹æ€§:ğŸ‰ğŸ‰ğŸ‰
```
    1. æ³›å«ä¹‰ä¸Šçš„ç‰¹æ€§ï¼ˆlessæ”¯æŒã€å‹ç¼©ã€åˆ†å—ç­‰ï¼‰
    2. ts/jsæ”¯æŒ
    3. è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦æ·»åŠ cesiumçš„webpacké…ç½®
    4. æ ¹æ®æŒ‡ä»¤ä»ä¸åŒå…¥å£æ–‡ä»¶å¯åŠ¨é¡¹ç›®
```

é¡¹ç›®å·¥ç¨‹ç‰¹æ€§:âœ¨âœ¨âœ¨
```
    1. webé¡¹ç›®çš„dockeréƒ¨ç½²é…ç½®æ–‡ä»¶
    2. æœ¬åœ°è°ƒè¯•å·¥å…·ï¼šæœ¬åœ°nginx å®¹å™¨æœåŠ¡ï¼ˆhttps,httpï¼‰
    3. .vscode->launch.json é…ç½®æµè§ˆå™¨ä»¥å…³é—­å®‰å…¨ç­–ç•¥å¯åŠ¨
    4. eslint æ£€æŸ¥ä»£ç 
    5. TODO: CICD
```


## å®‰è£…&å¯åŠ¨ ğŸš€ğŸš€ğŸš€ Installation
å®‰è£…:ğŸ”ğŸ”ğŸ”
```
yarn 
```

é¡¹ç›®-æŒ‡ä»¤:ğŸ‘‰ğŸ‘‰ğŸ‘‰
```
    1. ``yarn start`` å¯åŠ¨é¡¹ç›®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
    2. ``yarn build`` é¡¹ç›®æ‰“åŒ…(ç”Ÿäº§ç¯å¢ƒ)ï¼Œ``yarn build:test``é¡¹ç›®æ‰“åŒ…(æµ‹è¯•ç¯å¢ƒ)
    3. ``build:analyze`` é¡¹ç›®æ‰“åŒ…åˆ†æ
    4. ``yarn choose [xx]`` å¯åŠ¨ä»¥ã€xxã€‘å¼€å¤´ä¸”ä½äºsrc/examplesæ–‡ä»¶å¤¹ä¸‹çš„æ ·ä¾‹
```

## æ³¨æ„ï¼šğŸ’¢ğŸ’¢ğŸ’¢
1. æœ¬åœ°è°ƒè¯•ä¼˜å…ˆä½¿ç”¨[SwitchHosts](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&tn=02003390_hao_pg&wd=SwitchHosts&oq=SwitchHosts), nginxæ¬¡ä¹‹



## æ ¸å¿ƒå…¥å£ ğŸ’–ğŸ’–ğŸ’– The Core 

ReactåŸå…¥å£
``ReactDOM.render(root, document.getElementById("root"));`` 
å¯¹åº”å¦‚ä¸‹ï¼š

```
MyApp.start(<APP />,{
    //ï¼ˆå¯é€‰ï¼‰ è®¾ç½®å½“å‰é¡¹ç›®ç¯å¢ƒ,è¦†ç›–æ‰é»˜è®¤ç¯å¢ƒé…ç½® 
    appEnv:"prod";
    //ï¼ˆå¯é€‰ï¼‰ é…ç½®æ•°æ®ä¸­å¿ƒï¼Œè¯¦æƒ…è§ä¸‹é¢ 3.æ•°æ®ä¸­å¿ƒï¼ˆAPP_STOREï¼‰ç®¡ç†
    storeOpt:{}
    //ï¼ˆå¯é€‰ï¼‰ å¯åŠ¨çš„æ—¶å€™å¹²äº›äº‹æƒ…
    onInit: () => {};
    ...
});
```

å…¨å±€å±æ€§è·å–ï¼š
```
    - APP_VERSIONï¼š é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯
    - APP_ENVï¼š     é¡¹ç›®ç¯å¢ƒï¼ˆ"prod" | "test" | "dev"ï¼‰
    - APP_CONFIGï¼š  é¡¹ç›®é…ç½®
    - APP_STORE:    é¡¹ç›®æ•°æ®ä¸­å¿ƒ
```



## æ–‡æ¡£ ğŸ““ğŸ““ğŸ““ Documentation
### 1.é¡¹ç›®é…ç½®ï¼ˆAPP_CONFIGï¼‰ ç®¡ç† âš™âš™âš™
    é¡¹ç›®çš„é…ç½®ç»„æˆï¼ša.(å¯é€‰)å…¬æœ‰é…ç½®(public->public_app_config.js),b.(å¯é€‰)ç§æœ‰é…ç½®(src->private_app_config.json)ï¼Œc. (å¯é€‰)Myapp.start çš„å¯åŠ¨å‚æ•° app_configï¼Œç»„åˆä¸ºæœ€ç»ˆçš„APP_CONFIGã€‚

- å…¬/ç§æœ‰é…ç½®æ–‡ä»¶å›ºå®šç»“æ„è¯´æ˜:
```
    common:   å„ç¯å¢ƒcommoné…ç½®  
    dev:      å¼€å‘ä¸‹çš„é¡¹ç›®é…ç½®  
    test:     æµ‹è¯•ä¸‹çš„é¡¹ç›®é…ç½®  
    prod:     ç”Ÿäº§ä¸‹çš„é¡¹ç›®é…ç½®  
```

- é…ç½®ä¼˜å…ˆçº§è¯´æ˜:
```
    ç§æœ‰é…ç½®common < å…¬æœ‰é…ç½®common < ç§æœ‰é…ç½®å…·ä½“ç¯å¢ƒ < å…¬æœ‰é…ç½®å…·ä½“ç¯å¢ƒ < Myapp.start çš„å¯åŠ¨å‚æ•° app_config;
```

- é…ç½®è®¾ç½®æ–¹å¼ï¼š
```
    a. åœ¨å¯é…ç½®å¤„è¿›è¡Œé…ç½®è®¾ç½®  
    b. åœ¨ src->config->customConfig.ts ä¸­è®¾ç½®é¡¹ç›®é…ç½® çš„ç±»å‹ä¿¡æ¯. (æ–¹ä¾¿åœ¨ä½¿ç”¨APP_CONFIGçš„æ—¶å€™è·å–ç±»å‹æç¤ºï¼Œé»˜è®¤ï¼šany)
```

- ä»£ç ä¸­ä½¿ç”¨é…ç½®ä¸¾ä¾‹
```
    let api=APP_CONFIG.api;
```

### 2.æ•°æ®ä¸­å¿ƒï¼ˆAPP_STOREï¼‰ç®¡ç†
    APP_STOREæ˜¯ç”¨äºå­˜æ”¾é¡¹ç›®å…±äº«æ•°æ®çš„æ•°æ®ä¸­å¿ƒå’Œç®¡ç†é¡¹ç›®äº‹ä»¶çš„é€šä¿¡ä¸­å¿ƒã€‚  
    ï¼ˆå¦‚æœä¸ä¹ æƒ¯æä¾›çš„äº‹ä»¶ç®¡ç†åŠŸèƒ½,è¯·é…åˆä½¿ç”¨reduxã€mobxç­‰ï¼‰

- æ•°æ®ä¸­å¿ƒåœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨ï¼š
1. åœ¨ src-> config->customStore.ts ä¸­è®¾ç½® é¡¹ç›®æ•°æ®ä¸­å¿ƒéœ€è¦çš„æ•°æ®ï¼Œéœ€è¦å…³é—­å†æ‰“å¼€æˆ–åˆ·æ–°ä¾æ—§å­˜åœ¨çš„æ•°æ®éœ€è¦é€šè¿‡@attæ ‡æ³¨
2. åœ¨ src-> config->customStore.ts ä¸­å®šä¹‰ é¡¹ç›®éœ€è¦çš„é€šä¿¡äº‹ä»¶(æ–¹ä¾¿åœ¨ä½¿ç”¨APP_STORE.onå’Œ.emitçš„æ—¶å€™è·å–ç±»å‹æç¤ºï¼Œé»˜è®¤ï¼šany)ï¼Œ
3. è®¾ç½®æ•°æ®ä¸­å¿ƒçš„é…ç½®é¡¹
```
    MyApp.start(<APP />, {
        //storeé…ç½®é¡¹ï¼ˆå¯é€‰ï¼‰
        storeOpt:{
            // æ˜¯å¦å°†æ•°æ®å­˜å…¥Storage(å¯é€‰ï¼š"localStorage"ã€"sessionStorage"ã€"none")ï¼Œé»˜è®¤ï¼šâ€œnoneâ€
            saveItemToStorage: "localStorage";
            // å¯åŠ¨çš„æ—¶å€™åŠ è½½ä¸Šæ¬¡çš„æ•°æ®ï¼Œé»˜è®¤ï¼štrue
            loadDataOnOpen: false;
        },
        //ï¼ˆå¯é€‰ï¼‰æ•°æ®ä¸­å¿ƒæ•°æ®ã€‚é…ç½®è¿™ä¸ªä¼šè¦†ç›–æ‰MyStoreæ ‡æ³¨çš„æ•°æ®ä¸­å¿ƒ
        store_dataï¼š{}
    });
```
- ä½¿ç”¨æ•°æ®ä¸­å¿ƒä¸¾ä¾‹
```
    //ä½¿ç”¨ å…±äº«çš„æ•°æ®
    let authinfo=APP_STORE.authInfo;
    // ä¿®æ”¹ å…±äº«çš„æ•°æ®
    APP_STORE.authInfo= {};

    // æ•°æ®ä¸­å¿ƒæ•°æ® æŸå±æ€§æ›´æ”¹äº‹ä»¶ç›‘å¬
    APP_STORE.on("xxatt",(newValue,oldValue)=>{});
    // ä»»æ„æ•°æ®ä¸­å¿ƒ å±æ€§æ•°æ®ä¿®æ”¹äº‹ä»¶ç›‘å¬
    APP_STORE.on("attChange",(att,newValue,oldValue)=>{});

    //classç»„ä»¶ä½¿ç”¨
    @mapAppStoreToProps(["xxAtt"])
    export class ClassComp2 extends React.Component<{ xxAtt?: any }> {
        render() {
            return <div>ã€ClassComp2ã€‘xxAtt:{this.props.xxAtt}</div>
        }
    }
    //functionç»„ä»¶ä½¿ç”¨
    export function FuncComp2() {
        let storeAtt = useAppStore("xxAA");
        return <div>ã€FuncComp2ã€‘xxAA:{storeAtt}</div>
    }

```

### 3.é¡¹ç›®å¯é€‰é…ç½®

ä½¿ç”¨æ–¹å¼ä¸¾ä¾‹ï¼š
```
    MyApp.start(<APP />, {
        onInit: () => initAxiosConfig()
    });
```
å¯é€‰é…ç½®ï¼š
```
    1. åœ¨src->services->axiosClient é…ç½®äº†axiosçš„å…¨å±€é…ç½®
    2. TODO: mqtt/websocketç­‰ä¸šåŠ¡å°è£…
```
### 4.å…¬æœ‰ç»„ä»¶ä¸æ ·ä¾‹
```
    1. PrivateRoute (è·³è½¬è·¯ç”±,éªŒè¯token),ä½¿ç”¨æ ·ä¾‹è§ï¼šexamples->privateRoute_1
    2. LazyComp (æ‡’åŠ è½½ç»„ä»¶), ä½¿ç”¨æ ·ä¾‹è§ï¼šexamples->lazyComp_1ã€examples->lazyComp_2
    3. examples->router_1ï¼šæ¼”ç¤ºè·¯ç”±é›†ä¸­é…ç½®(åŒ…å«å¤šçº§è·¯ç”±)
    4. examples->appStoreï¼šæ¼”ç¤ºæ•°æ®ä¸­å¿ƒä½¿ç”¨æ–¹å¼ï¼ˆclassç»„ä»¶ä¸functionç»„ä»¶ï¼‰
    5. examples->lazyComp_1ï¼šæ¼”ç¤ºlazyCompåŸºæœ¬ä½¿ç”¨
    6. examples->lazyComp_2ï¼šæ¼”ç¤ºlazyCompé…åˆè·¯ç”±åšé¡µé¢bundleåˆ†å‰²
    7. examples->privateRoute_1ï¼šæ¼”ç¤ºprivateRouteåšç•Œé¢æƒé™æ£€æŸ¥è·³è½¬
    7. TODO: echartsæ ·ä¾‹
```













